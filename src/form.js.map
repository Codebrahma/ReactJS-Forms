{"version":3,"sources":["../app/form.js"],"names":["Form","componentPayload","props","state","canSubmit","enableButton","bind","disableButton","generateInputComponents","formInputs","map","data","input","index","type","component","setState","nextProps","isEmpty","errors","refs","form","updateInputsWithError","Submit","submitData","find","obj","handleOnSubmit"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAMA,OAAO,SAAPA,IAAO,CAACC,gBAAD,EAAsB;AAClC;AAAA;;AACC,gCAAYC,KAAZ,EAAkB;AAAA;;AAAA,2IACXA,KADW;;AAEjB,SAAKC,KAAL,GAAa;AACTC,eAAW;AADF,IAAb;;AAIE,SAAKC,YAAL,GAAqB,MAAKA,YAAL,CAAkBC,IAAlB,OAArB;AACA,SAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,OAArB;AACD,SAAKE,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BF,IAA7B,OAA/B;AARgB;AAShB;;AAVH;AAAA;AAAA,6CAY2B;AACzB,QAAIG,aAAa,iBAAEC,GAAF,CAAM,KAAKR,KAAL,CAAWS,IAAjB,EAAuB,UAACC,KAAD,EAAQC,KAAR,EAAkB;AACzD,SAAID,MAAME,IAAN,KAAe,QAAnB,EAA6B,OAAO,IAAP;AAC7B,SAAMC,YAAYd,iBAAiBW,MAAME,IAAvB,CAAlB;AACA,YAAQ,8BAAC,SAAD,CAAW,IAAX,aAAgB,KAAKD,KAArB,IAAgCD,KAAhC,EAAR;AACA,KAJgB,CAAjB;;AAMA,WAAOH,UAAP;AACC;AApBH;AAAA;AAAA,kCAsBgB;AACZ,SAAKO,QAAL,CAAc,EAAEZ,WAAW,IAAb,EAAd;AACD;AAxBH;AAAA;AAAA,mCA0BiB;AACb,SAAKY,QAAL,CAAc,EAAEZ,WAAW,KAAb,EAAd;AACD;AA5BH;AAAA;AAAA,6CA8B4Ba,SA9B5B,EA8BsC;AAClC,QAAG,CAAC,iBAAEC,OAAF,CAAUD,UAAUE,MAApB,CAAJ,EAAgC;AAC9B,UAAKC,IAAL,CAAUC,IAAV,CAAeC,qBAAf,CAAqCL,UAAUE,MAA/C;AACD;AACF;AAlCH;AAAA;AAAA,4BAoCU;AACP,QAAMI,SAAStB,iBAAiB,QAAjB,CAAf;;AAEA,QAAMuB,aAAa,iBAAEC,IAAF,CAAO,KAAKvB,KAAL,CAAWS,IAAlB,EAAwB,UAACe,GAAD,EAAS;AACnD,YAAOA,IAAIZ,IAAJ,KAAa,QAApB;AACA,KAFkB,CAAnB;;AAIA,WACG;AAAA;AAAA;AACE;AAAA,4BAAQ,IAAR;AAAA;AACE,YAAI,MADN;AAEE,kBAAW,KAAKP,aAFlB;AAGE,gBAAS,KAAKF,YAHhB;AAIE,sBAAe,KAAKH,KAAL,CAAWyB;AAJ5B;AAME;AAAA;AAAA;AACC,YAAKnB,uBAAL;AADD,OANF;AAUE,oCAAC,MAAD,CAAQ,IAAR;AACE,iBAAU,CAAC,KAAKL,KAAL,CAAWC;AADxB,SAEMoB,UAFN;AAVF;AADF,KADH;AAmBA;AA9DH;;AAAA;AAAA;AAgEA,CAjED;;kBAmEexB,I","file":"form.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport Formsy from 'formsy-react';\nimport _ from 'lodash';\n\nconst Form = (componentPayload) => {\n\treturn class FormWithSubmitButton extends Component {\n\t\tconstructor(props){\n\t\t\tsuper(props);\n\t\t\tthis.state = {\n\t      canSubmit: false\n\t    };\n\n\t    this.enableButton  = this.enableButton.bind(this);\n\t    this.disableButton = this.disableButton.bind(this);\n\t  \tthis.generateInputComponents = this.generateInputComponents.bind(this);\n\t  }\n\n\t  generateInputComponents(){\n\t\t\tlet formInputs = _.map(this.props.data, (input, index) => {\n\t\t\t\tif (input.type === 'submit') return null;\n\t\t\t\tconst component = componentPayload[input.type];\n\t\t\t\treturn (<component.type key={index} {...input} />);\n\t\t\t});\n\n\t\t\treturn formInputs;\n\t  }\n\n\t  enableButton(){\n\t    this.setState({ canSubmit: true });\n\t  }\n\n\t  disableButton(){\n\t    this.setState({ canSubmit: false });\n\t  }\n\n\t  componentWillReceiveProps(nextProps){\n\t    if(!_.isEmpty(nextProps.errors)){\n\t      this.refs.form.updateInputsWithError(nextProps.errors);\n\t    };\n\t  };\n\n\t  render(){\n\t  \tconst Submit = componentPayload['submit'];\n      \n\t  \tconst submitData = _.find(this.props.data, (obj) => {\n\t  \t\treturn obj.type === 'submit';\n\t  \t})\n\n\t  \treturn(\n\t      <div>\n\t        <Formsy.Form\n\t          ref=\"form\"\n\t          onInvalid={this.disableButton}\n\t          onValid={this.enableButton}\n\t          onValidSubmit={this.props.handleOnSubmit}\n\t         >\n\t          <div>\n  \t\t      \t{this.generateInputComponents()}\n\t          </div>\n\n\t          <Submit.type\n\t            disabled={!this.state.canSubmit}\n\t            {...submitData}\n\t          />\n\t        </Formsy.Form>        \n\t      </div>\n\t  \t);\n\t  }\n\t};\n};\n\nexport default Form;"]}